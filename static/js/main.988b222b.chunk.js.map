{"version":3,"sources":["api/api.js","components/Comment.jsx","components/CommentList.jsx","components/Post.jsx","components/PostList.jsx","components/SearchField.jsx","components/Button.jsx","App.jsx","index.js"],"names":["URL","getPosts","fetch","concat","then","res","json","getUsers","getComments","Comments","_ref","comment","react_default","a","createElement","className","href","name","body","email","CommentList","props","comments","map","Comment","key","id","Post","post","title","user","address","city","street","suite","components_CommentList","PostList","posts","components_Post","SearchField","filterPosts","type","placeholder","onChange","autoComplete","Button","loadPosts","buttonStatus","errorText","onClick","disabled","App","state","postsToRender","isLoaded","searchFieldValue","_callee","_ref2","_ref3","users","groupedData","regenerator_default","wrap","_context","prev","next","_this","setState","Promise","all","sent","Object","slicedToArray","groupAllData","t0","message","stop","objectSpread","find","userId","filter","postId","debounce","event","target","value","toLowerCase","replace","prevState","includes","debouncedFilterPosts","persist","_this$state","this","Fragment","components_SearchField","components_PostList","components_Button","Component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.988b222b.chunk.js","sourcesContent":["const URL = 'https://jsonplaceholder.typicode.com';\r\n\r\nexport const getPosts = () => {\r\n  return fetch(`${URL}/posts`).then(res => res.json());\r\n};\r\n\r\nexport const getUsers = () => {\r\n  return fetch(`${URL}/users`).then(res => res.json());\r\n};\r\n\r\nexport const getComments = () => {\r\n  return fetch(`${URL}/comments`).then(res => res.json());\r\n};\r\n","import React from 'react';\r\n\r\nconst Comments = ({ comment }) => {\r\n  return (\r\n    <section className=\"post__comment\">\r\n      <span className=\"comment__name\">\r\n        <a href=\"#/\">{comment.name}</a>\r\n      </span>\r\n      <span className=\"comment__body\">{comment.body}</span>\r\n      <span className=\"comment__email\">\r\n        <a href=\"#/\">{comment.email}</a>\r\n      </span>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React from 'react';\r\nimport Comment from './Comment';\r\n\r\nconst CommentList = props => {\r\n  const { comments } = props;\r\n\r\n  return (\r\n    <section className=\"post__comments\">\r\n      {comments.map(comment => (\r\n        <Comment comment={comment} key={comment.id} />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CommentList;\r\n","import React from 'react';\r\nimport CommentList from './CommentList';\r\n\r\nconst Post = props => {\r\n  const { post } = props;\r\n\r\n  return (\r\n    <section className=\"post\">\r\n      <span className=\"post__title\">{post.title}</span>\r\n      <span className=\"post__author-name\">\r\n        <a href=\"#/\">{post.user.name}</a>\r\n      </span>\r\n      <span className=\"post__body\">{post.body}</span>\r\n      <span className=\"post__email\">\r\n        <a href=\"#/\">{post.user.email}</a>\r\n      </span>\r\n      <span className=\"post__address\">\r\n        <a href=\"#/\">\r\n          {post.user.address.city} {post.user.address.street}{' '}\r\n          {post.user.address.suite}\r\n        </a>\r\n      </span>\r\n      <CommentList comments={post.comments} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React from 'react';\r\nimport Post from './Post';\r\n\r\nconst PostList = props => {\r\n  const { posts } = props;\r\n\r\n  return (\r\n    <div className=\"postList\">\r\n      {posts.map(post => (\r\n        <Post post={post} key={post.id} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import React from 'react';\r\n\r\nconst SearchField = ({ filterPosts }) => {\r\n  return (\r\n    <input\r\n      type=\"search\"\r\n      className=\"searchField\"\r\n      placeholder=\"Search by title and text...\"\r\n      onChange={filterPosts}\r\n      autoComplete=\"off\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchField;\r\n","import React from 'react';\r\n\r\nconst Button = ({ loadPosts, buttonStatus, errorText }) => {\r\n  const innerText = () => {\r\n    if (!buttonStatus && !errorText) {\r\n      return 'Press Me';\r\n    } else if (errorText) {\r\n      return 'Try Again';\r\n    } else {\r\n      return 'Loading...';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={loadPosts}\r\n      className={`loadPostsButton ${errorText ? 'error' : ''}`}\r\n      disabled={buttonStatus}\r\n    >\r\n      {innerText()}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\nimport { debounce } from 'lodash';\nimport './App.scss';\nimport { getPosts, getUsers, getComments } from './api/api';\nimport PostList from './components/PostList';\nimport SearchField from './components/SearchField';\nimport Button from './components/Button';\n\nclass App extends Component {\n  state = {\n    posts: [],\n    postsToRender: [],\n    isLoaded: false,\n    buttonStatus: false,\n    searchFieldValue: '',\n    errorText: ''\n  };\n\n  loadPosts = async () => {\n    this.setState({\n      buttonStatus: true,\n      errorText: ''\n    });\n\n    try {\n      const [posts, users, comments] = await Promise.all([\n        getPosts(),\n        getUsers(),\n        getComments()\n      ]);\n\n      const groupedData = this.groupAllData(posts, users, comments);\n\n      this.setState({\n        posts: groupedData,\n        postsToRender: groupedData,\n        isLoaded: true\n      });\n    } catch (err) {\n      this.setState({\n        isLoaded: false,\n        buttonStatus: false,\n        errorText: err.message\n      });\n    }\n  };\n\n  groupAllData = (posts, users, comments) => {\n    return posts.map(post => ({\n      ...post,\n      user: users.find(user => post.userId === user.id),\n      comments: comments.filter(comment => comment.postId === post.id)\n    }));\n  };\n\n  filterPosts = debounce(event => {\n    const searchFieldValue = event.target.value\n      .toLowerCase()\n      .replace(/(\\s)/gm, '');\n\n    if (!searchFieldValue) {\n      this.setState(prevState => ({\n        postsToRender: prevState.posts\n      }));\n    } else {\n      this.setState(prevState => {\n        const postsToRender = prevState.posts.filter(post =>\n          (post.title + post.body)\n            .replace(/(\\s)/gm, '')\n            .toLowerCase()\n            .includes(searchFieldValue)\n        );\n\n        return {\n          searchFieldValue: searchFieldValue,\n          postsToRender: postsToRender || prevState.posts\n        };\n      });\n    }\n  }, 333);\n\n  debouncedFilterPosts = event => {\n    event.persist();\n    this.filterPosts(event);\n  };\n\n  render() {\n    const {\n      isLoaded,\n      errorText,\n      buttonStatus,\n      searchFieldValue,\n      postsToRender\n    } = this.state;\n\n    return (\n      <div className=\"App\">\n        <div className=\"myFancyBlock\">\n          {isLoaded ? (\n            <>\n              <SearchField\n                searchFieldValue={searchFieldValue}\n                filterPosts={this.debouncedFilterPosts}\n              />\n              <PostList posts={postsToRender} />\n            </>\n          ) : (\n            <>\n              <Button\n                errorText={errorText}\n                loadPosts={this.loadPosts}\n                buttonStatus={buttonStatus}\n              />\n              <div className=\"error__message\">{errorText}</div>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}