(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(23)},19:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),o=a.n(s),c=(a(19),a(12)),l=a(1),u=a.n(l),m=a(10),i=a(5),d=a(6),p=a(7),f=a(11),h=a(8),E=a(13),b=a(9),v=(a(22),"https://jsonplaceholder.typicode.com"),_=function(){return fetch("".concat(v,"/posts")).then(function(e){return e.json()})},y=function(){return fetch("".concat(v,"/users")).then(function(e){return e.json()})},N=function(){return fetch("".concat(v,"/comments")).then(function(e){return e.json()})},g=function(e){var t=e.comment;return r.a.createElement("section",{className:"post__comment"},r.a.createElement("span",{className:"comment__name"},r.a.createElement("a",{href:"#/"},t.name)),r.a.createElement("span",{className:"comment__body"},t.body),r.a.createElement("span",{className:"comment__email"},r.a.createElement("a",{href:"#/"},t.email)))},j=function(e){var t=e.comments;return r.a.createElement("section",{className:"post__comments"},t.map(function(e){return r.a.createElement(g,{comment:e,key:e.id})}))},P=function(e){var t=e.post;return r.a.createElement("section",{className:"post"},r.a.createElement("span",{className:"post__title"},t.title),r.a.createElement("span",{className:"post__author-name"},r.a.createElement("a",{href:"#/"},t.user.name)),r.a.createElement("span",{className:"post__body"},t.body),r.a.createElement("span",{className:"post__email"},r.a.createElement("a",{href:"#/"},t.user.email)),r.a.createElement("span",{className:"post__address"},r.a.createElement("a",{href:"#/"},t.user.address.city," ",t.user.address.street," ",t.user.address.suite)),r.a.createElement(j,{comments:t.comments}))},S=function(e){var t=e.posts;return r.a.createElement("div",{className:"postList"},t.map(function(e){return r.a.createElement(P,{post:e,key:e.id})}))},T=function(e){var t=e.filterPosts;return r.a.createElement("input",{type:"search",className:"searchField",placeholder:"Search by title and text...",onChange:t,autoComplete:"off"})},w=function(e){var t=e.loadPosts,a=e.buttonStatus,n=e.errorText;return r.a.createElement("button",{type:"button",onClick:t,className:"loadPostsButton ".concat(n?"error":""),disabled:a},a||n?n?"Try Again":"Loading...":"Press Me")},x=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],postsToRender:[],isLoaded:!1,buttonStatus:!1,searchFieldValue:"",errorText:""},a.loadPosts=Object(i.a)(u.a.mark(function e(){var t,n,r,s,o,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({buttonStatus:!0,errorText:""}),e.prev=1,e.next=4,Promise.all([_(),y(),N()]);case 4:t=e.sent,n=Object(m.a)(t,3),r=n[0],s=n[1],o=n[2],c=a.groupAllData(r,s,o),a.setState({posts:c,postsToRender:c,isLoaded:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a.setState({isLoaded:!1,buttonStatus:!1,errorText:e.t0.message});case 16:case"end":return e.stop()}},e,null,[[1,13]])})),a.groupAllData=function(e,t,a){return e.map(function(e){return Object(c.a)({},e,{user:t.find(function(t){return e.userId===t.id}),comments:a.filter(function(t){return t.postId===e.id})})})},a.filterPosts=Object(b.debounce)(function(e){var t=e.target.value.toLowerCase().replace(/(\s)/gm,"");t?a.setState(function(e){var a=e.posts.filter(function(e){return(e.title+e.body).replace(/(\s)/gm,"").toLowerCase().includes(t)});return{searchFieldValue:t,postsToRender:a||e.posts}}):a.setState(function(e){return{postsToRender:e.posts}})},333),a.debouncedFilterPosts=function(e){e.persist(),a.filterPosts(e)},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.errorText,n=e.buttonStatus,s=e.searchFieldValue,o=e.postsToRender;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"myFancyBlock"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{searchFieldValue:s,filterPosts:this.debouncedFilterPosts}),r.a.createElement(S,{posts:o})):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{errorText:a,loadPosts:this.loadPosts,buttonStatus:n}),r.a.createElement("div",{className:"error__message"},a))))}}]),t}(n.Component);o.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.90267f79.chunk.js.map