(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(29)},22:function(e,t,n){},24:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),s=n.n(o),c=(n(22),n(7)),m=n(13),i=(n(24),n(5)),u=n(2),l="FETCH_POSTS",d="IS_LOADING",p="IS_LOADED",f="REMOVE_COMMENT",E="REMOVE_POST",h="ERROR",b="https://jsonplaceholder.typicode.com",v=function(){return function(e){e({type:d}),Promise.all([fetch("".concat(b,"/posts")).then(function(e){return e.json()}),fetch("".concat(b,"/users")).then(function(e){return e.json()}),fetch("".concat(b,"/comments")).then(function(e){return e.json()})]).then(function(e){var t=Object(c.a)(e,3);return function(e,t,n){return e.map(function(e){return Object(u.a)({},e,{user:t.find(function(t){return e.userId===t.id}),comments:n.filter(function(t){return t.postId===e.id})})})}(t[0],t[1],t[2])}).then(function(t){e({type:l,posts:t}),e({type:p})}).catch(function(t){return e({type:h,error:t})}).finally(e({type:d}))}},_=function(e){var t=e.comment,n=e.postId,a=e.removeComment;return r.a.createElement("section",{className:"comment"},r.a.createElement("span",{className:"comment__name"},r.a.createElement("a",{href:"#/"},t.name)),r.a.createElement("span",{className:"comment__email"},r.a.createElement("a",{href:"#/"},t.email)),r.a.createElement("span",{className:"comment__remove",onClick:function(){a(n,t.id)}},"\u2716"),r.a.createElement("span",{className:"comment__text"},t.body))},g=function(e){var t=e.comments,n=e.postId,a=e.removeComment;return r.a.createElement("section",{className:"post__comments"},t.map(function(e){return r.a.createElement(_,{comment:e,removeComment:a,postId:n,key:e.id})}))},y=Object(i.b)(null,function(e){return{removePost:function(t){return e(function(e){return{type:E,id:e}}(t))},removeComment:function(t,n){return e(function(e,t){return{type:f,postId:e,commentId:t}}(t,n))}}})(function(e){var t=e.post,n=e.removePost,a=e.removeComment;return r.a.createElement("section",{className:"post"},r.a.createElement("span",{className:"post__title"},t.title),r.a.createElement("span",{className:"post__author-name"},r.a.createElement("a",{href:"#/"},t.user.name)),r.a.createElement("span",{className:"post__remove",onClick:function(){return n(t.id)}},"Remove"),r.a.createElement("span",{className:"post__body"},t.body),r.a.createElement("span",{className:"post__email"},r.a.createElement("a",{href:"#/"},t.user.email)),r.a.createElement("span",{className:"post__address"},r.a.createElement("a",{href:"#/"},t.user.address.city," ",t.user.address.street," ",t.user.address.suite)),r.a.createElement(g,{comments:t.comments,removeComment:a,postId:t.id}))}),O=function(e){var t=e.posts;return r.a.createElement("div",{className:"postList"},t.map(function(e){return r.a.createElement(y,{post:e,key:e.id})}))},j=function(e){var t=e.debouncedChangeSearchFieldValue;return r.a.createElement("input",{type:"search",className:"searchField",placeholder:"Search by title and text...",onChange:t,autoComplete:"off"})},L=function(e){var t=e.fetchPosts,n=e.isLoading,a=e.error;return r.a.createElement("button",{type:"button",onClick:t,className:a?"loadPostsButton error":"loadPostsButton",disabled:n},n||a?a?"Try Again":"Loading...":"Press Me")},N=Object(i.b)(function(e){return{posts:e.postsReducer.posts,isLoaded:e.postsReducer.isLoaded,isLoading:e.postsReducer.isLoading,error:e.postsReducer.isLoading}},function(e){return{fetchPosts:function(){return e(v())}}})(function(e){var t=e.posts,n=e.isLoaded,o=e.isLoading,s=e.error,i=e.fetchPosts,u=Object(a.useState)(""),l=Object(c.a)(u,2),d=l[0],p=l[1],f=Object(m.debounce)(function(e){var t=e.target.value.toLowerCase().replace(/(\s)/gm,"");if(!t)return p("");console.log("changed SearchFieldValue"),p(t)},333),E=Object(a.useMemo)(function(){return function(e,t){return console.log("filtePOstst"),t?e.filter(function(e){return(e.title+e.body).replace(/(\s)/gm,"").toLowerCase().includes(t)}):e}(t,d)},[t,d]);return r.a.createElement("div",{className:"App"},console.log(t),r.a.createElement("div",{className:"myFancyBlock"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{searchFieldValue:d,debouncedChangeSearchFieldValue:function(e){e.persist(),f(e)}}),r.a.createElement(O,{posts:E})):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{error:s,fetchPosts:i,isLoading:o}),r.a.createElement("div",{className:"error__message"},s))))}),C=n(3),I=n(15),P=n(16),R={posts:[],isLoaded:!1,isLoading:!1,error:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)({},e,{posts:t.posts});case p:return Object(u.a)({},e,{isLoaded:!e.isLoaded});case d:return Object(u.a)({},e,{isLoading:!e.isLoading});case h:return Object(u.a)({},e,{error:t.error});case E:var n=e.posts.filter(function(e){return e.id!==t.id});return Object(u.a)({},e,{posts:n});case f:var a=e.posts.findIndex(function(e){return e.id===t.postId}),r=Object(u.a)({},e);return r.posts[a].comments=r.posts[a].comments.filter(function(e){return e.id!==t.commentId}),r;default:return e}},w=Object(C.combineReducers)({postsReducer:S}),F=[I.a],k=Object(C.createStore)(w,{},Object(P.composeWithDevTools)(C.applyMiddleware.apply(void 0,F)));s.a.render(r.a.createElement(i.a,{store:k},r.a.createElement(N,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3fed0287.chunk.js.map